create table city (city_id integer generated by default as identity, city varchar(255), primary key (city_id));
create table counterparty (type smallint check (type between 0 and 2), address_id bigint, id bigint generated by default as identity, edrpou varchar(255), full_name varchar(255), inn varchar(255), phone_number varchar(255), short_name varchar(255), vat_reg_number varchar(255), primary key (id));
create table goodservice (id bigint generated by default as identity, name varchar(255), primary key (id));
create table moove_doc (inner_doc_number integer not null, counter_party_id bigint, doc_date timestamp(6), id bigint not null, doctype varchar(31) not null, supplier_doc_number varchar(255), primary key (id));
create table moove_doc_goods_or_services (goods_or_services_id bigint not null unique, moove_doc_id bigint not null);
create table person_address (city_city_id integer, id bigint generated by default as identity, street_id bigint, zip varchar(255), primary key (id));
create table street (id bigint generated by default as identity, street varchar(255), primary key (id));
alter table if exists counterparty add constraint FK3l31ocjpisa6prhhrftjjqowt foreign key (address_id) references person_address;
alter table if exists moove_doc add constraint FK9ahu8y3hckk24733e0k3h3cxk foreign key (counter_party_id) references counterparty;
alter table if exists moove_doc_goods_or_services add constraint FKroqn8a26m7u6gcr6acfjweq08 foreign key (goods_or_services_id) references goodservice;
alter table if exists moove_doc_goods_or_services add constraint FK7r01r2i9mkj44jmmxkp6rvoyr foreign key (moove_doc_id) references moove_doc;
alter table if exists person_address add constraint FKmyitvjxifn6nary3g8txem194 foreign key (city_city_id) references city;
alter table if exists person_address add constraint FK3sxuv68jge2ty6bip2exnsriq foreign key (street_id) references street;
